<script src="http://code.jquery.com/jquery-1.9.1.js"></script>


<div class="small text-muted mb-3">You have not added a payment card</div>
<button class="btn btn-info" type="button" data-toggle="modal" data-target="#staticBackdrop">Add Payment Card</button>
<!-- Modal -->
<form action="{% url 'users:addcard' %}" method="post">{% csrf_token %}
	<div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-body">
				<div class="text-right"> <i class="fa fa-close close" data-dismiss="modal"></i> </div>
					<div class="tabs mt-3">
					    <ul class="nav nav-tabs" id="myTab" role="tablist">
					        <li class="nav-item" role="presentation"> <a class="nav-link active" id="visa-tab" data-toggle="tab" href="#visa" role="tab" aria-controls="visa" aria-selected="true"> <img src="https://i.imgur.com/sB4jftM.png" style="width: 50px;"> </a> </li>
					    </ul>

					<div class="tab-content" id="myTabContent">
					    <div class="tab-pane fade show active" id="visa" role="tabpanel" aria-labelledby="visa-tab">
					    <div class="mt-4 mx-4">
					        <div class="text-center">
					           <h5>Card Details</h5>
					        </div>
					    <div class="form mt-3">
					        <div class="inputbox mt-4"><span>Cardholder Name</span>  <input type="text" name="owner" class="form-control" required="required"></div>
					        <div class="inputbox mt-2 mb-2"><span>Card Number</span>  <input type="number" name="card-number"  class="form-control" required="required" pattern="^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|)$" title="please insert a valid card number"></div>

					        <div class="d-flex flex-row">
					            <div class="inputbox mx-auto"><span>Expiration Date</span><input type="month" name="expired-date" id="expired-date" class="form-control" required="required"></div>
					        <div class="inputbox mx-auto"><span>CVV</span><input type="password" name="cvv" min_length="3" max_length="3" class="form-control" required="required" pattern = "[0-9]+" title="insert valid CVC number"> </div>
					        </div>
							<div class="modal-footer">
								<button type="submit" class="btn btn-success col-sm-3">Add card</button>
								<button type="button" class="btn btn-danger col-sm-3" data-dismiss="modal">Close</button>
							</div>
					 	    </div>
					      </div>
				        </div>
			          </div>
		            </div>
	            </div>
			</div>
		</div>
	</div>
</form>
<hr>
<script type="text/javascript">
// Use Javascript
let today = new Date();
let mm = today.getMonth()+1; //January is 0 so need to add 1 to make it 1!
let yyyy = today.getFullYear();
if(mm<10){
  mm='0'+mm
} 
date = yyyy+'-'+mm;
$('#expired-date').on('click', ()=>{
	$('#expired-date').attr('min', date);
})
</script>